

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Welcome to PCAT’s documentation! &mdash; PCAT 0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="PCAT 0.1 documentation" href="#"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="#" class="fa fa-home"> PCAT</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Welcome to PCAT&#8217;s documentation!</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#diagnostics">Diagnostics</a></li>
</ul>
</li>
</ul>
</div>
          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="#">PCAT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="#">Docs</a> &raquo;</li>
      
    <li>Welcome to PCAT&#8217;s documentation!</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="welcome-to-pcat-s-documentation">
<h1>Welcome to PCAT&#8217;s documentation!<a class="headerlink" href="#welcome-to-pcat-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>When testing hypotheses or inferring their free parameters, a recurring problem is to compare models that contain a number of objects whose multiplicity is itself unknown. Therefore, given some data, it is desirable to be able to compare models with different number of parameters. One way of achieving this is to obtain a point estimate (usually the most likely point) in the parameter space of each model and, then, rely on some information criterion to penalize more complex models for excess degrees of freedom. Another way is to sample from the parameter space of each model and compare their Bayesian evidence. Yet another is to take samples from the union of the hypotheses using a set of transdimensional jumps across models. This is what PCAT (Probabilistic Cataloger) is designed for.</p>
<p>PCAT is a hierarchical, transdimensional MCMC sampler. Given some data, it can be used to sample from the <strong>catalog space</strong>, i.e., the hypothesis space of a model with a variable number of components. Alternatively, it can be used as a general purpose Poisson mixture sampler to infer clusters in a dataset.</p>
<p>A user manual for PCAT will be published here soon.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install PCAT you can use pip</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pcat</span>
</pre></div>
</div>
<p>or download <a class="reference external" href="https://github.com/tdaylan/pcat/releases/">the latest release</a> and run</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>All user interaction with PCAT is accomplished through the <code class="docutils literal"><span class="pre">pcat.main.init()</span></code> function.</p>
<dl class="function">
<dt id="pcat.main.init">
<code class="descclassname">pcat.main.</code><code class="descname">init</code><span class="sig-paren">(</span><em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#pcat.main.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an observed dataset, sample from the hypothesis space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>verbtype</strong> (<em>int</em>) &#8211; <p>Verbosity level</p>
<ul>
<li><code class="docutils literal"><span class="pre">0</span></code> No standard output</li>
<li><code class="docutils literal"><span class="pre">1</span></code> Minimal standard output including status of progress (Default)</li>
<li><code class="docutils literal"><span class="pre">2</span></code> Diagnostic verbose standard output</li>
</ul>
</li>
<li><strong>pathbase</strong> (<em>str</em>) &#8211; Data path of PCAT. PCAT expects input data in <code class="docutils literal"><span class="pre">pathbase/data/inpt/</span></code> and writes the output chains and plots in the relevant subfolders <code class="docutils literal"><span class="pre">pathbase/data/outp/rtag</span></code> and <code class="docutils literal"><span class="pre">pathbase/imag/rtag</span></code>, respectively, where <code class="docutils literal"><span class="pre">rtag</span></code> is the run tag. The <code class="docutils literal"><span class="pre">pathbase</span></code> folder is created if it does not already exist. It defaults to the value of the environment variable <code class="docutils literal"><span class="pre">PCAT_DATA_PATH</span></code>. Therefore <code class="docutils literal"><span class="pre">pathbase</span></code> can be omitted by setting the environment variable <code class="docutils literal"><span class="pre">PCAT_DATA_PATH</span></code>.</li>
<li><strong>numbswep</strong> (<em>int</em>) &#8211; Number of samples to be taken by each process</li>
<li><strong>numbburn</strong> (<em>int</em>) &#8211; Number of samples to be discarded from the beginning of each chain</li>
<li><strong>factthin</strong> (<em>int</em>) &#8211; Factor by which to thin each chain. Only one sample out of <code class="docutils literal"><span class="pre">factthin</span></code> samples is saved.</li>
<li><strong>indxenerincl</strong> (<em>ndarray int</em>) &#8211; Indices of energy bins to be taken into account. It is only effective if data is provided by the user, i.e., for non-simulation runs, where it defaults to all available energy bins. Other energy bins are discarded.</li>
<li><strong>indxevttincl</strong> (<em>ndarray int</em>) &#8211; Indices of PSF class bins to be taken into account. Works similar to <code class="docutils literal"><span class="pre">indxenerincl</span></code>.</li>
<li><strong>anglassc</strong> (<em>float</em>) &#8211; Radius of the circle within which sample catalog point sources can be associated with the point sources in the reference catalog.</li>
<li><strong>margfactcomp</strong> (<em>float</em>) &#8211; The ratio of the side of the square in which the sample point sources are associated with the reference catalog, to the size of the image.</li>
<li><strong>nameexpr</strong> (<em>str</em>) &#8211; A string that describes the provided reference catalog to be shown in the plot legends.</li>
<li><strong>diagmode</strong> (<em>bool</em>) &#8211; Start the run in diagnostic mode. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>cntrpnts</strong> (<em>bool</em>) &#8211; Force the mock data to a single PS at the center of the image. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>numbspatdims</strong> (<em>None</em>) &#8211; Number of spatial dimensions. Currently not functional.</li>
<li><strong>pntstype</strong> (<em>str</em>) &#8211; <p>Functional type of point sources.</p>
<ul>
<li><code class="docutils literal"><span class="pre">lght</span></code> Point sources are light sources</li>
<li><code class="docutils literal"><span class="pre">lens</span></code> Point sources are lenses.</li>
</ul>
</li>
<li><strong>randinit</strong> (<em>bool</em>) &#8211; Force the initial state to be randomly drawn from the prior. Default behavior for mock data is to initialize the chain with the true state.</li>
<li><strong>loadvaripara</strong> (<em>None</em>) &#8211; Load the diagonal elements of the previously learned covariance</li>
<li><strong>optiprop</strong> &#8211; Optimize the scale of each proposal by acceptance ratio feedback. All samples during the tuning are discarded.</li>
<li><strong>regulevi</strong> (<em>bool</em>) &#8211; Regularize the log-evidence estimate.</li>
<li><strong>strgexprflux</strong> (<em>str</em>) &#8211; Name of the FITS file (without the extension) in <code class="docutils literal"><span class="pre">pathdata</span></code> containing the observed data as an <code class="docutils literal"><span class="pre">ndarray</span></code>. The file should contain a numpy array of dimension $(N_e, N_{pix}, N_{psf}$, where $N_e$ is the number of energy bins, $N_{pix}$ is the number of spatial pixels and $N_{psf}$ is the number of PSF classes. The units should be photons per $cm^2$ per seconds per GeV.</li>
<li><strong>strgcatl</strong> (<em>str</em>) &#8211; A descriptive name for the provided reference catalog to be shown in the plot legends.</li>
<li><strong>strgback</strong> (<em>list of str</em><em> or </em><em>int</em>) &#8211; A list of FITS file names (without the extension) in <code class="docutils literal"><span class="pre">pathdata</span></code> each containing a spatial template for the background prediction as an <code class="docutils literal"><span class="pre">ndarray</span></code>. See <code class="docutils literal"><span class="pre">strgexprflux</span></code> for the content of the file and its unit. One element of the list can be a float, indicating an isotropic template with the provided amplitude.</li>
<li><strong>lablback</strong> (<em>list of str</em>) &#8211; a list of axis labels for the spatial background templates to be shown in plots.</li>
<li><strong>strgexpo</strong> (<em>str</em><em> or </em><em>float</em>) &#8211; Name of the FITS file (without the extension) in <code class="docutils literal"><span class="pre">pathdata</span></code> containing the exposure map. See <code class="docutils literal"><span class="pre">strgexprflux</span></code> for the format of the numpy array. <code class="docutils literal"><span class="pre">strgexpo</span></code> can also be a float, in which case the exposure map will be assumed to be uniform across along all data dimensions.</li>
<li><strong>numbproc</strong> (<em>int</em>) &#8211; Number of processes. The total number of samples before thinning and burn-in, will be <code class="docutils literal"><span class="pre">numbproc</span></code> times <code class="docutils literal"><span class="pre">numbswep</span></code>.</li>
<li><strong>liketype</strong> (<em>strg</em>) &#8211; <p>Type of the likelihood.</p>
<ul>
<li><code class="docutils literal"><span class="pre">pois</span></code> Poisson probability of getting the observed number of counts given the model prediction (default).</li>
<li><code class="docutils literal"><span class="pre">gaus</span></code> Gaussian approximation of the above. This may accelerate the execution in cases, where the bottle neck of the sampler time budget is likelihood evaluation.</li>
</ul>
</li>
<li><strong>exprtype</strong> (<em>str</em>) &#8211; Name of the experiment used to collect the observed data. <code class="docutils literal"><span class="pre">exprtype</span></code> can be used to set other options to their default values for the particular experiment.
- <code class="docutils literal"><span class="pre">ferm</span></code> Fermi-LAT
- <code class="docutils literal"><span class="pre">chan</span></code> Chandra
- <code class="docutils literal"><span class="pre">hubb</span></code> HST
- <code class="docutils literal"><span class="pre">sdss</span></code> SDSS</li>
<li><strong>lgalcntr</strong> (<em>float</em>) &#8211; Galactic longitude of the image center. <code class="docutils literal"><span class="pre">lgalcntr</span></code> and <code class="docutils literal"><span class="pre">bgalcntr</span></code> are used to rotate the observed data, exposure and background maps as well as the provided reference catalog to the center of the ROI. They are only effective when pixelization is HealPix, i.e, <code class="docutils literal"><span class="pre">pixltype='heal'</span></code>.</li>
<li><strong>bgalcntr</strong> (<em>float</em>) &#8211; Galactic latitude of the image center. See <code class="docutils literal"><span class="pre">lgalcntr</span></code>.</li>
<li><strong>maxmangl</strong> (<em>float</em>) &#8211; Maximum angular separation at which PSF can be interpolated. It defaults to three times the diagonal legth of the image, enough to evaluate the PSF across the whole image.</li>
<li><strong>exprinfo</strong> (<em>bool</em>) &#8211; Overplot the provided reference catalog on the output plots.</li>
<li><strong>pixltype</strong> &#8211; <p>Type of the pixelization.</p>
<ul>
<li><code class="docutils literal"><span class="pre">heal</span></code> HealPix</li>
<li><code class="docutils literal"><span class="pre">chan</span></code> Cartesian</li>
<li><code class="docutils literal"><span class="pre">unbd</span></code> Unbinned (Not yet functional)</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Plotting</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>numbswepplot</strong> (<em>int</em>) &#8211; Number of samples (before thinning and burn-in) for which one set of frame plots will be produced. Frame plots reveal individual samples in detail and are later used for producing animations.</li>
<li><strong>makeplot</strong> (<em>bool</em>) &#8211; Make output plots, which is the default behavior. If <code class="docutils literal"><span class="pre">False</span></code>, no output plots are produced.</li>
<li><strong>scalmaps</strong> (<em>str</em>) &#8211; <p>A string that sets the stretch of the count maps</p>
<ul>
<li><code class="docutils literal"><span class="pre">asnh</span></code> Arcsinh (default)</li>
<li><code class="docutils literal"><span class="pre">self</span></code> Linear</li>
<li><code class="docutils literal"><span class="pre">logt</span></code> Log 10</li>
</ul>
</li>
<li><strong>satumaps</strong> (<em>bool</em>) &#8211; Saturate the count maps</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="diagnostics">
<h2>Diagnostics<a class="headerlink" href="#diagnostics" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure to run PCAT with <code class="docutils literal"><span class="pre">diagmode=False</span></code> for good time performance. <code class="docutils literal"><span class="pre">diagmode=True</span></code> puts the sampler in a conservative diagnostic mode and performs extensive checks on the state of critical data structures to ensure that the model and proposals are self consistent.</p>
</div>
<div class="toctree-wrapper compound">
</div>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Tansu Daylan.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>