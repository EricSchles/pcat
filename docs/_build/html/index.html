

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Welcome to PCAT’s documentation! &mdash; PCAT 0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="PCAT 0.1 documentation" href="#"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="#" class="fa fa-home"> PCAT</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Welcome to PCAT&#8217;s documentation!</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#input">Input</a><ul>
<li><a class="reference internal" href="#supplying-data">Supplying data</a></li>
<li><a class="reference internal" href="#specifying-model-priors">Specifying model priors</a></li>
<li><a class="reference internal" href="#generating-mock-data">Generating mock data</a></li>
<li><a class="reference internal" href="#selecting-the-initial-state">Selecting the initial state</a></li>
</ul>
</li>
<li><a class="reference internal" href="#output">Output</a><ul>
<li><a class="reference internal" href="#plots">Plots</a></li>
<li><a class="reference internal" href="#chain">Chain</a></li>
</ul>
</li>
<li><a class="reference internal" href="#diagnostics">Diagnostics</a><ul>
<li><a class="reference internal" href="#autocorrelation">Autocorrelation</a></li>
<li><a class="reference internal" href="#gelman-rubin-test">Gelman-Rubin test</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tutorial">Tutorial</a></li>
<li><a class="reference internal" href="#api">API</a></li>
<li><a class="reference internal" href="#garbage-collection">Garbage collection</a></li>
</ul>
</li>
</ul>
</div>
          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="#">PCAT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="#">Docs</a> &raquo;</li>
      
    <li>Welcome to PCAT&#8217;s documentation!</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="welcome-to-pcat-s-documentation">
<h1>Welcome to PCAT&#8217;s documentation!<a class="headerlink" href="#welcome-to-pcat-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>When testing hypotheses or inferring their free parameters, a recurring problem is to compare models that contain a number of objects whose multiplicity is itself unknown. Therefore, given some data, it is desirable to be able to compare models with different number of parameters. One way of achieving this is to obtain a point estimate (usually the most likely point) in the parameter space of each model and, then, rely on some information criterion to penalize more complex models for excess degrees of freedom. Another way is to sample from the parameter space of each model and compare their Bayesian evidence. Yet another is to take samples from the union of the hypotheses using a set of transdimensional jumps across models. This is what PCAT (Probabilistic Cataloger) is designed for.</p>
<p>PCAT is a hierarchical, transdimensional MCMC sampler. It&#8217;s theoretical framework is introduced in <a class="reference external" href="https://arxiv.org/abs/1607.04637">Daylan, Portillo &amp; Finkbeiner (2016)</a>, submitted to ApJ. Given some data, it can be used to sample from the <strong>catalog space</strong>, i.e., the hypothesis space of a model with a variable number of components. Alternatively, it can be used as a general purpose Poisson mixture sampler to infer clusters in a dataset.</p>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="installation">
<span id="sectinst"></span><h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install PCAT you can use pip</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pcat</span>
</pre></div>
</div>
<p>or download <a class="reference external" href="https://github.com/tdaylan/pcat/releases/">the latest release</a> and run</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
</div>
<div class="section" id="input">
<span id="sectinpt"></span><h2>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h2>
<p>PCAT expects input data in the folder <code class="docutils literal"><span class="pre">pathbase/data/inpt/</span></code>. The principal input is the observed dataset, which could be binned or unbinned (currently unfunctional).</p>
<div class="section" id="supplying-data">
<h3>Supplying data<a class="headerlink" href="#supplying-data" title="Permalink to this headline">¶</a></h3>
<p>Input dataset is provided through the <code class="docutils literal"><span class="pre">strgexprflux</span></code> argument. This should be the name of a FITS file (including the <code class="docutils literal"><span class="pre">.fits</span></code> extension), which contains a numpy array of dimension <span class="math">\(N_e \times N_{pix} \times N_{psf}\)</span>, where <span class="math">\(N_e\)</span> is the number of energy bins, <span class="math">\(N_{pix}\)</span> is the number of spatial pixels and <span class="math">\(N_{psf}\)</span> is the number of PSF classes. The units should be photons per cm <span class="math">\(^2\)</span> per seconds per GeV.</p>
<p>The exposure map is suppled via the <code class="docutils literal"><span class="pre">strgexpo</span></code> argument. This should be the name of a FITS file (including the <code class="docutils literal"><span class="pre">.fits</span></code> extension). The format should be the same as <code class="docutils literal"><span class="pre">strgexprflux</span></code>, whereas units should be cm <span class="math">\(^2\)</span> GeV.</p>
<p>Similary, background templates can be provided via the <code class="docutils literal"><span class="pre">back</span></code> argument. <code class="docutils literal"><span class="pre">back</span></code> should be a list of FITS file names (including the <code class="docutils literal"><span class="pre">.fits</span></code> extension), whose format should be same as that of <code class="docutils literal"><span class="pre">strgexprflux</span></code>.</p>
</div>
<div class="section" id="specifying-model-priors">
<h3>Specifying model priors<a class="headerlink" href="#specifying-model-priors" title="Permalink to this headline">¶</a></h3>
<p>The prior structure of the model is set by the relevant arguments to <code class="docutils literal"><span class="pre">pcat.main.init()</span></code>. PCAT allows the following components in the model:</p>
<ul>
<li><p class="first">Background prediction</p>
<blockquote>
<div><p>Given some an observed dataset, it can be expressed as a Poisson realization of the integral emission from a large number of point sources. However, due to the prohibitively large number of point sources required, it is favorable to represent the contribution of extremely faint point sources (those that negligibly affect the likelihood) with background templates. PCAT allows a list of spatially and spectrally distinct background templates to be in the model simultaneously.</p>
</div></blockquote>
</li>
<li><p class="first">Point Spread Function (PSF)</p>
<blockquote>
<div><p>PSF defines a how a delta function in the position space projects onto the data space, e.g., the image. PCAT assumes that all point sources are characterized by the same PSF.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="generating-mock-data">
<h3>Generating mock data<a class="headerlink" href="#generating-mock-data" title="Permalink to this headline">¶</a></h3>
<p>PCAT ships with a built-in mock (simulated) data generator. The generated mock data is randomly drawn from a generative mock model, not to be confused with the above model subject to inference. Once the user configures the prior probability density of this model, PCAT samples from the catalog space given the simulated dataset. Some of the mock model parameters can be fixed, i.e., assigned delta function priors. These are</p>
<ul class="simple">
<li>the number of mock point sources, <code class="docutils literal"><span class="pre">mocknumbpnts</span></code>,</li>
<li>hyperparameters controlling the population characteristics of these point sources.</li>
</ul>
<p>All other mock model parameters are fair draws from the hierarchical prior.</p>
<p>When working on variations of a certain problem or different analyses on the same dataset, it is useful to have default priors. PCAT allows unique defaults for different built-in experiments, controlled by the argument <code class="docutils literal"><span class="pre">exprtype</span></code>. Currently the built-in experimental types are</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ferm</span></code>: Fermi-LAT (Default)</li>
<li><code class="docutils literal"><span class="pre">chan</span></code>: Chandra</li>
<li><code class="docutils literal"><span class="pre">hubb</span></code>: Hubble Space Telescope</li>
<li><code class="docutils literal"><span class="pre">sdss</span></code>: SDSS</li>
<li><code class="docutils literal"><span class="pre">gaia</span></code>: Gaia</li>
</ul>
<p>By setting <code class="docutils literal"><span class="pre">exprtype</span></code> the user imposes the default prior structure for the chosen experimental type. However, it is also desirable to be able to change the prior of a specific parameter. This is accomplished by setting the <a class="reference internal" href="#sectoutp"><span class="std std-ref">relevant argument(s)</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The mock generative model defaults to that of the model subject to inference. In other words, if the user does not specify any mock model parameters, the generative mock model will be the same as the model used to fit the data. In most cases, one will be interested in studying mismodeling, i.e., when the mock data is generated from a model different from that used to fit the data. This can be achieved by deliberately setting the mock model parameters different from the prior model.</p>
</div>
</div>
<div class="section" id="selecting-the-initial-state">
<h3>Selecting the initial state<a class="headerlink" href="#selecting-the-initial-state" title="Permalink to this headline">¶</a></h3>
<p>When the dataset is supplied by the user (<code class="docutils literal"><span class="pre">strgexprflux</span></code> is set), and unless specified otherwise by setting <code class="docutils literal"><span class="pre">randinit=False</span></code>, the initial state of the chain is drawn randomly from the prior. Note that in order for the initial state to be nonrandom, a reference catalog needs to be internally supplied.</p>
<p>In constrast, if the dataset is simulated, <code class="docutils literal"><span class="pre">randinit</span></code> is not <code class="docutils literal"><span class="pre">True</span></code> and generative mock model is the same as the prior model, then the initial state of the chain is set to be the state from which the mock dataset was drawn.</p>
</div>
</div>
<div class="section" id="output">
<span id="sectoutp"></span><h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p>A function call to <code class="docutils literal"><span class="pre">pcat.main.init()</span></code> returns the collected samples as well as postprocessed variables in an object that we will refer to as <code class="docutils literal"><span class="pre">gdat</span></code>. Any output (as well as many internal variables of the sampler) can be accessed via the attributes of this global object.</p>
<p>Furthermore, PCAT ships with extensive routines to visualize the output chain. The output plots are placed in the relevant subfolders <code class="docutils literal"><span class="pre">pathbase/data/outp/rtag</span></code> and <code class="docutils literal"><span class="pre">pathbase/imag/rtag</span></code>, respectively, where <code class="docutils literal"><span class="pre">rtag</span></code> is the run tag. The <code class="docutils literal"><span class="pre">pathbase</span></code> folder is created if it does not already exist. It defaults to the value of the environment variable <code class="docutils literal"><span class="pre">$PCAT_DATA_PATH</span></code>. Therefore <code class="docutils literal"><span class="pre">pathbase</span></code> can be omitted by setting the environment variable <code class="docutils literal"><span class="pre">$PCAT_DATA_PATH</span></code>.</p>
<div class="section" id="plots">
<span id="sectplot"></span><h3>Plots<a class="headerlink" href="#plots" title="Permalink to this headline">¶</a></h3>
<p>If not disabled by the user, PCAT produces plots in every stage of a run. Some plots are produced in the initial setup, frame plots are produced at predetermined times during the sampling and others are produced in the postprocessing after all chains have run. There are five subfolders in the plot folder of a given run.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">init</span></code> Initial setup, pixel lookup table (if applicable)</li>
<li><code class="docutils literal"><span class="pre">fram</span></code> Frame plots</li>
<li><code class="docutils literal"><span class="pre">diag</span></code> Diagnostic plots</li>
<li><code class="docutils literal"><span class="pre">post</span></code> Posterior distribution plots of model parameters and derived quantities, prior and likelihood.</li>
<li><code class="docutils literal"><span class="pre">anim</span></code> GIF animations made from the frame plots in <code class="docutils literal"><span class="pre">fram</span></code> that are producing during sampling.</li>
</ul>
</div>
<div class="section" id="chain">
<h3>Chain<a class="headerlink" href="#chain" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">pcat.main.init()</span></code> returns an object that contains the output chain.</p>
</div>
</div>
<div class="section" id="diagnostics">
<h2>Diagnostics<a class="headerlink" href="#diagnostics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="autocorrelation">
<h3>Autocorrelation<a class="headerlink" href="#autocorrelation" title="Permalink to this headline">¶</a></h3>
<p>A chain of states needs to be Markovian (memoryless) in order to be interpreted as fair draws from a target probability density. The autocorrelation of the chain shows whether the chain is self-similar along the simulation time (either due to low acceptance rate or small step size). Therefore the autocorrelation plots should be monitored after eah run.</p>
<p>In a transdimensional setting, the autocorrelation of a parameter is ill-defined, since parameters can be born, killed or change identity. Therefore, for such parameters, we calculate the autocorrelation
The autocorrelation Note that the
In the The acceptance rate of the birth and death moves shows whether the prior on the amplitude of the elements is appropriate. If the acceptance rate of birth and deaths proposals is too low, the lower limit of the prior on the amplitude is too high. Likewise, if it is too low, the lower limit of the prior on the amplitude is too low. This behaviour is due to the fact that element parameters (position, amplitude and, if relevant, spectral or shape parameters) are drawn randomly from the prior when a birth is proposed. Therefore the lower limit on the amplitude prior should be adjusted such that the birth and death acceptance rate is between <span class="math">\(\sim 5%% - \sim30%%\)</span>. Otherwise across-model sampling will be inefficient and result in slow convergence.</p>
</div>
<div class="section" id="gelman-rubin-test">
<h3>Gelman-Rubin test<a class="headerlink" href="#gelman-rubin-test" title="Permalink to this headline">¶</a></h3>
<p>PCAT nominally runs multiple, noninteracting chains, whose samples are aggregated at the end. In order to ensure convergence, therefore, one can compare within-chain variance with across-chain variance. This is known as the Gelman-Rubin test. PCAT outputs the GR test statistics in <code class="docutils literal"><span class="pre">gdat.gmrb</span></code> and plots the relevant diagnostics in <code class="docutils literal"><span class="pre">$PCAT_DATA_PATH/imag/rtag/diag/</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure to run PCAT with the argument <code class="docutils literal"><span class="pre">diagmode=False</span></code> for reasonable time performance. <code class="docutils literal"><span class="pre">diagmode=True</span></code> option puts the sampler in a conservative diagnostic mode and performs extensive checks on the state of critical data structures to ensure that the model and proposals are self consistent, largely slowing down execution.</p>
</div>
</div>
</div>
<div class="section" id="tutorial">
<h2>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h2>
<p>In this tutorial, we will illustrate how to run PCAT during a typical science analysis. Assuming that you have <a class="reference internal" href="#sectinst"><span class="std std-ref">installed</span></a> PCAT, let us first run it on mock data.</p>
<p>All user interaction with PCAT can be performed through the <code class="docutils literal"><span class="pre">pcat.main.init()</span></code> funtion. Because arguments to this function have hierarchically defined defaults, even the default call (without arguments) starts a valid PCAT run.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pcat.main</span>
<span class="n">pcat</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</pre></div>
</div>
<p>This runs PCAT on mock Fermi-LAT data to collect a single chain of 100000 samples before thinning and burn-in. After initialization, PCAT collects samples, produces frame plots (snapshots of the sampler state during the execution) and postprocesses the samples at the end. The run should finish in under half an hour with the message</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>&gt;&gt; The ensemble of catalogs is at $PCAT_DATA_PATH/data/outp/rtag/
</pre></div>
</div>
<p>While the sampler is running, you can check <code class="docutils literal"><span class="pre">$PCAT_DATA_PATH/imag/rtag/</span></code> to inspect <a class="reference internal" href="#sectplot"><span class="std std-ref">the output plots</span></a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pcat</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">init</span><span class="p">(</span> \
          <span class="n">randinit</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> \
          <span class="n">maxmgang</span><span class="o">=</span><span class="n">deg2rad</span><span class="p">(</span><span class="mf">20.</span><span class="p">),</span> \
          <span class="n">indxenerincl</span><span class="o">=</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> \
          <span class="n">indxevttincl</span><span class="o">=</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> \
          <span class="n">lgalcntr</span><span class="o">=</span><span class="n">lgalcntr</span><span class="p">,</span> \
          <span class="n">bgalcntr</span><span class="o">=</span><span class="n">bgalcntr</span><span class="p">,</span> \
          <span class="n">minmflux</span><span class="o">=</span><span class="mf">3e-11</span><span class="p">,</span> \
          <span class="n">maxmflux</span><span class="o">=</span><span class="mf">3e-6</span><span class="p">,</span> \
          <span class="n">strgback</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;isotflux.fits&#39;</span><span class="p">,</span> <span class="s1">&#39;fdfmflux</span><span class="si">%s</span><span class="s1">.fits&#39;</span> <span class="o">%</span> <span class="n">strgcntr</span><span class="p">],</span> \
          <span class="n">strgexpo</span><span class="o">=</span><span class="s1">&#39;fermexpo_cmp0_igal</span><span class="si">%s</span><span class="s1">.fits&#39;</span> <span class="o">%</span> <span class="n">strgcntr</span><span class="p">,</span> \
          <span class="n">strgexprflux</span><span class="o">=</span><span class="s1">&#39;fermflux_cmp0_igal</span><span class="si">%s</span><span class="s1">.fits&#39;</span> <span class="o">%</span> <span class="n">strgcntr</span><span class="p">,</span> \
         <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p>All user interaction with PCAT is accomplished through the <code class="docutils literal"><span class="pre">pcat.main.init()</span></code> function. Below is a list of its function arguments.</p>
<dl class="function">
<dt id="pcat.main.init">
<code class="descclassname">pcat.main.</code><code class="descname">init</code><span class="sig-paren">(</span><em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#pcat.main.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an observed dataset, sample from the hypothesis space.</p>
<p><strong>Sampler settings</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>numbswep</strong> (<em>int</em>) &#8211; Number of samples to be taken by each process</li>
<li><strong>numbburn</strong> (<em>int</em>) &#8211; Number of samples to be discarded from the beginning of each chain</li>
<li><strong>factthin</strong> (<em>int</em>) &#8211; Factor by which to thin each chain. Only one sample out of <code class="docutils literal"><span class="pre">factthin</span></code> samples is saved.</li>
<li><strong>numbproc</strong> (<em>int</em>) &#8211; Number of processes. The total number of samples before thinning and burn-in, will be <code class="docutils literal"><span class="pre">numbproc</span></code> times <code class="docutils literal"><span class="pre">numbswep</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Input</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>indxenerincl</strong> (<em>ndarray int</em>) &#8211; Indices of energy bins to be taken into account. It is only effective if data is provided by the user, i.e., for non-simulation runs, where it defaults to all available energy bins. Other energy bins are discarded.</li>
<li><strong>indxevttincl</strong> (<em>ndarray int</em>) &#8211; Indices of PSF class bins to be taken into account. Works similar to <code class="docutils literal"><span class="pre">indxenerincl</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Output</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>verbtype</strong> (<em>int</em>) &#8211; <p>Verbosity level</p>
<ul>
<li><code class="docutils literal"><span class="pre">0</span></code> No standard output</li>
<li><code class="docutils literal"><span class="pre">1</span></code> Minimal standard output including status of progress (Default)</li>
<li><code class="docutils literal"><span class="pre">2</span></code> Diagnostic verbose standard output</li>
</ul>
</li>
<li><strong>pathbase</strong> (<em>str</em>) &#8211; Data path of PCAT. See <a class="reference internal" href="#sectoutp"><span class="std std-ref">Output</span></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Associations with the reference catalog</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>anglassc</strong> (<em>float</em>) &#8211; Radius of the circle within which sample catalog point sources can be associated with the point sources in the reference catalog.</li>
<li><strong>margfactcomp</strong> (<em>float</em>) &#8211; The ratio of the side of the square in which the sample point sources are associated with the reference catalog, to the size of the image.</li>
<li><strong>nameexpr</strong> (<em>str</em>) &#8211; A string that describes the provided reference catalog to be shown in the plot legends.</li>
<li><strong>cntrpnts</strong> (<em>bool</em>) &#8211; Force the mock data to a single PS at the center of the image. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>General</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pntstype</strong> (<em>str</em>) &#8211; <p>Functional type of point sources.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">lght</span></code> Point sources are light sources</li>
<li><code class="docutils literal"><span class="pre">lens</span></code> Point sources are lenses.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Initial state</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>randinit</strong> (<em>bool</em>) &#8211; Force the initial state to be randomly drawn from the prior. Default behavior for mock data is to initialize the chain with the true state.</td>
</tr>
</tbody>
</table>
<p><strong>Adaptive burn-in</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>loadvaripara</strong> (<em>bool</em>) &#8211; Load the diagonal elements of the previously learned covariance</li>
<li><strong>optiprop</strong> (<em>bool</em>) &#8211; Optimize the scale of each proposal by acceptance rate feedback. All samples during the tuning are discarded.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Post processing</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>regulevi</strong> (<em>bool</em>) &#8211; Regularize the log-evidence estimate.</li>
<li><strong>strgexprflux</strong> (<em>str</em>) &#8211; Name of the FITS file (without the extension) in <code class="docutils literal"><span class="pre">pathdata</span></code> containing the observed data as an <code class="docutils literal"><span class="pre">ndarray</span></code>.</li>
<li><strong>strgcatl</strong> (<em>str</em>) &#8211; A descriptive name for the provided reference catalog to be shown in the plot legends.</li>
<li><strong>strgback</strong> (<em>list of str</em><em> or </em><em>int</em>) &#8211; A list of FITS file names (without the extension) in <code class="docutils literal"><span class="pre">pathdata</span></code> each containing a spatial template for the background prediction as an <code class="docutils literal"><span class="pre">ndarray</span></code>. See <code class="docutils literal"><span class="pre">strgexprflux</span></code> for the content of the file and its unit. One element of the list can be a float, indicating an isotropic template with the provided amplitude.</li>
<li><strong>lablback</strong> (<em>list of str</em>) &#8211; a list of axis labels for the spatial background templates to be shown in plots.</li>
<li><strong>strgexpo</strong> (<em>str</em><em> or </em><em>float</em>) &#8211; Name of the FITS file (without the extension) in <code class="docutils literal"><span class="pre">pathdata</span></code> containing the exposure map. See <code class="docutils literal"><span class="pre">strgexprflux</span></code> for the format of the numpy array. <code class="docutils literal"><span class="pre">strgexpo</span></code> can also be a float, in which case the exposure map will be assumed to be uniform across along all data dimensions.</li>
<li><strong>liketype</strong> (<em>strg</em>) &#8211; <p>Type of the likelihood.</p>
<ul>
<li><code class="docutils literal"><span class="pre">pois</span></code> Poisson probability of getting the observed number of counts given the model prediction (default).</li>
<li><code class="docutils literal"><span class="pre">gaus</span></code> Gaussian approximation of the above. This may accelerate the execution in cases, where the bottle neck of the sampler time budget is likelihood evaluation.</li>
</ul>
</li>
<li><strong>exprtype</strong> (<em>str</em>) &#8211; Name of the experiment used to collect the observed data. <code class="docutils literal"><span class="pre">exprtype</span></code> can be used to set other options to their default values for the particular experiment.
- <code class="docutils literal"><span class="pre">ferm</span></code> Fermi-LAT
- <code class="docutils literal"><span class="pre">chan</span></code> Chandra
- <code class="docutils literal"><span class="pre">hubb</span></code> HST
- <code class="docutils literal"><span class="pre">sdss</span></code> SDSS</li>
<li><strong>lgalcntr</strong> (<em>float</em>) &#8211; Galactic longitude of the image center. <code class="docutils literal"><span class="pre">lgalcntr</span></code> and <code class="docutils literal"><span class="pre">bgalcntr</span></code> are used to rotate the observed data, exposure and background maps as well as the provided reference catalog to the center of the ROI. They are only effective when pixelization is HealPix, i.e, <code class="docutils literal"><span class="pre">pixltype='heal'</span></code>.</li>
<li><strong>bgalcntr</strong> (<em>float</em>) &#8211; Galactic latitude of the image center. See <code class="docutils literal"><span class="pre">lgalcntr</span></code>.</li>
<li><strong>maxmangl</strong> (<em>float</em>) &#8211; Maximum angular separation at which PSF can be interpolated. It defaults to three times the diagonal legth of the image, enough to evaluate the PSF across the whole image.</li>
<li><strong>pixltype</strong> &#8211; <p>Type of the pixelization.</p>
<ul>
<li><code class="docutils literal"><span class="pre">heal</span></code> HealPix</li>
<li><code class="docutils literal"><span class="pre">chan</span></code> Cartesian</li>
<li><code class="docutils literal"><span class="pre">unbd</span></code> Unbinned (Not yet functional)</li>
</ul>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Plotting</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>makeplot</strong> (<em>bool</em>) &#8211; Make output plots, which is the default behavior. If <code class="docutils literal"><span class="pre">False</span></code>, no output plots are produced.</li>
<li><strong>numbswepplot</strong> (<em>int</em>) &#8211; Number of samples (before thinning and burn-in) for which one set of frame plots will be produced. Frame plots reveal individual samples in detail and are later used for producing animations.</li>
<li><strong>scalmaps</strong> (<em>str</em>) &#8211; <p>A string that sets the stretch of the count maps</p>
<ul>
<li><code class="docutils literal"><span class="pre">asnh</span></code> Arcsinh (default)</li>
<li><code class="docutils literal"><span class="pre">self</span></code> Linear</li>
<li><code class="docutils literal"><span class="pre">logt</span></code> Log 10</li>
</ul>
</li>
<li><strong>satumaps</strong> (<em>bool</em>) &#8211; Saturate the count maps</li>
<li><strong>exprinfo</strong> (<em>bool</em>) &#8211; Overplot the provided reference catalog on the output plots.</li>
<li><strong>makeanim</strong> (<em>bool</em>) &#8211; Make animations of the frame plots. Defaults to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li><strong>anotcatl</strong> (<em>bool</em>) &#8211; Anotate the catalog members on the plots, if an annotation text is provided along with the reference catalog. (Default: <code class="docutils literal"><span class="pre">False</span></code>)</li>
<li><strong>strgbinsener</strong> (<em>str</em>) &#8211; A string holding the label for the energy axis.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Diagnostics</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>diagmode</strong> (<em>bool</em>) &#8211; Start the run in diagnostic mode. Defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li><strong>strgexprname</strong> (<em>str</em>) &#8211; A string describing the experiment used to collect the observed data.</li>
<li><strong>strganglunit</strong> (<em>str</em>) &#8211; Label for the spatial axes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="sectmockpara"></span></div>
<div class="section" id="garbage-collection">
<h2>Garbage collection<a class="headerlink" href="#garbage-collection" title="Permalink to this headline">¶</a></h2>
<p>PCAT produces two folders for the output of each run, one for plots and the other to contain the chain saved to the disc. Given that many test and intermediate runs may be needed before each science run, the number of folders (and files therein) may increase quickly. In order to avoid this, the script <code class="docutils literal"><span class="pre">gcol.py</span></code> is provided to the user as a convenience. When executed, it erases the output from all runs that</p>
<ul class="simple">
<li>have not run to completion, i.e., does not have the animations, which are produced at the very end, or</li>
<li>has collected less than 100000 samples per chain.</li>
</ul>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Tansu Daylan.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>